<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    var wsServer = 'ws://47.94.167.205:9509';
    var websocket = new WebSocket(wsServer);
    websocket.onopen = function (evt) {
        websocket.send('{"service":"socket_login","user_id":1003,"phone" :"13312062676"}');
        console.log("Connected to WebSocket server.");
    };

    websocket.onclose = function (evt) {
        console.log("Disconnected");
    };

    websocket.onmessage = function (evt) {
        try{
            let data = JSON.parse(evt.data);
            console.log(data);
        }catch (e) {
            console.log(e);
        }
    };

    websocket.onerror = function (evt, e) {
        console.log('Error occured: ' + evt.data);
    };

    // setInterval(
    //     function () {
    //         websocket.send('{"service":"socket_health","user_id":1003,"phone" :"13312062676"}');
    //     }    ,
    //     2000
    // );

    setTimeout(
        function () {
            websocket.send('{"service":"socket_request","user_id":1003,"call_phone":"13312062676","consumer_id":"10101"}');
        }    ,
        2000
    );

    </script>
</body>
</html>